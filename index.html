<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>挂鸡污喵王内测版0.42</title>

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/game.css">
    <link rel="stylesheet" href="css/slot-machine.css">
</head>
<body>
    <div class="container">
        <div class="status-bar">
            <div class="status-group">
                <div class="status-item"><span class="status-icon">🔪</span><span>熟练度: <span id="proficiencyDisplay">...</span></span></div>
                <div class="status-item"><span class="status-icon">⭐</span><span>装备等级: <span id="gearScoreDisplay">...</span></span></div>
                <div class="status-item"><span class="status-icon">💰</span><span>金币: <span id="goldDisplay">...</span></span></div>
                
                <div id="specialItemsContainer" class="status-group" style="margin-left: 10px;"></div> 

            </div>
             <div class="save-button-group">
                <button id="settingsBtn" class="wow-button">设置</button>
            </div>
        </div>

        <div class="content-wrapper">
            <div class="main-column">
                <div class="animation-area" id="animationArea">
                    <div class="scene-indicator" id="sceneIndicator">选择地下城开始</div>
                    <canvas id="gameCanvas" width="800" height="400"></canvas>
                    <div class="instructions">勇士将自动攻击敌人，击败所有敌人进入下一场景</div>
                    <div id="resultScreen">
                        <div class="result-text" id="battleResult"></div>
                        <div class="stats-text" id="survivorsCount"></div>
                        <div class="stats-text" id="battleTime"></div>
                        <div class="countdown-text" id="countdown"></div>
                    </div>
                    
                    <div id="commanderSkillBar" style="display: none;">
                        <div class="skill-btn-wrapper">
                            <button id="skillAttackBtn" class="wow-button skill-btn">⚔️ 猛击</button>
                        </div>
                        <div class="skill-btn-wrapper">
                            <button id="skillHeroismBtn" class="wow-button skill-btn">🩸 嗜血</button>
                            <div class="skill-cooldown" id="cdHeroism"></div>
                        </div>
                        <div class="skill-btn-wrapper" style="display: none;">
                            <button id="skillArmyBtn" class="wow-button skill-btn">🧟 亡者大军</button>
                            <div class="skill-cooldown" id="cdArmy"></div>
                        </div>
                    </div>

                </div>
                <div class="message-section">
                    <div class="message-header"><span>📜 消息日志</span></div>
                    <div class="message-container" id="messageContainer"><div class="message system">📢 欢迎来到挂鸡污喵王内测版！</div><div class="message system">📢 游戏已初始化，请选择一个地下城开始冒险！</div></div>
                </div>
            </div>
            <div class="sidebar-column">
                 <div class="dungeon-progress-area">
                    <div class="progress-title" id="dungeonProgressTitle">副本进度区域</div>
                    <ul class="boss-list" id="bossList"></ul>
                    <div class="progress-button-container">
                        <button class="wow-button" id="viewProgressBtn">查看地下城进度</button>
                    </div>
                </div>
                <div class="quest-area">
                    <div class="quest-title">📜 任务列表</div><div class="quest-list" id="questList"></div>
                </div>
            </div>
        </div>

        <div class="button-section">
            <div class="button-header">🏰 功能与地下城选择</div>
            <div class="button-row">
                <div class="wow-button" id="characterBtn">角色</div>
                <div class="wow-button" id="dungeon5Btn">5人地下城</div>
                <div class="wow-button" id="dungeon10Btn">10人团队副本</div>
                <div class="wow-button" id="dungeon25Btn">25人团队副本</div>
                <div class="wow-button" id="exchangeBtn">兑换中心</div>
                <div class="wow-button" id="collectiblesBtn">收藏品</div>
                
                <div class="chest-wrapper" id="chestBtn" title="点击打开幸运宝箱">
                    <div class="chest-icon">🎁</div>
                    <div class="chest-badge" id="chestBadge">0</div>
                </div>
            </div>
        </div>

        <div class="footer-info">
            参与改进本游戏请加挂鸡污喵王QQ群63825952
        </div>
    </div>

    <div id="progressModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>地下城进度 (点击可直接挑战)</h2>
                <button class="modal-close" id="progressModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="dungeon-list-container">
                    <div class="dungeon-list">
                        <h3>5人地下城</h3>
                        <ul id="dungeon5pList"></ul>
                    </div>
                    <div class="dungeon-list">
                        <h3>10人团队副本</h3>
                        <ul id="dungeon10pList"></ul>
                    </div>
                    <div class="dungeon-list">
                        <h3>25人团队副本</h3>
                        <ul id="dungeon25pList"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="exchangeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>兑换中心</h2>
                <button class="modal-close" id="exchangeModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body" id="exchangeModalBody">
            </div>
        </div>
    </div>
    <div id="settingsModal" class="modal">
        <div class="modal-content" style="width: 400px;">
             <div class="modal-header">
                <h2>游戏设置</h2>
                <button class="modal-close" id="settingsModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body settings-button-container">
                <button id="importSaveBtn" class="wow-button" style="display: none;">导入存档</button>
                <button id="exportSaveBtn" class="wow-button" style="display: none;">导出存档</button>
                <button id="gameHelpBtn" class="wow-button">游戏说明</button>
                <button id="clearSaveBtn" class="wow-button">清除存档</button>
                <button id="ascendBtn" class="wow-button" style="display: none;">飞升重置</button>
            </div>
        </div>
    </div>
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>游戏说明</h2>
                <button class="modal-close" id="helpModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <h3>来了老弟！</h3>
                <p>我是污喵王，以前叫阿尔傻斯。这游戏的名字是《挂鸡污喵王》，QQ群63825952</p>
                <br>
                <h3>游戏目标：</h3>
                <ul>
                    <li>通过挑战 5/10/25 人副本提升你的装备等级。</li>
                    <li>在 25 人副本“十字军的试炼”中收集“炉石传说的碎片”，铸造传说武器：炉石传说·真尼玛好玩！</li>
                    <li>收集有趣的玩具、坐骑等收藏品，当前版本共17件。</li>
                </ul>
                <br>
                <h3>提示：</h3>
                <ul>
                    <li>因每次更新改动较大，内测版存档可能在更新后无法继承，请见谅。</li>
                    <li>每当完成所有5人地下城，所有地下城的进度将重置。</li>
                    <li>熟练度可略微增加勇士们攻击速度和移动速度；装备等级可增加勇士们的攻击力和血量。</li>
                    <li>当拥有橙色武器时，可在设置中进行飞升，获得传奇信物，收藏品不会重置。</li>
                    <li>兑换中心新增欢乐水果机。</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="characterModal" class="modal">
        <div class="modal-content character-pane">
            <div class="modal-header">
                <h2>角色信息</h2>
                <button class="modal-close" id="characterModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body character-detailed-layout">
                <div class="character-equipment">
                    <div class="equipment-grid-wow">
                        <div class="equip-slot slot-head" data-slot="head"><span>👑</span><br>头部</div>
                        <div class="equip-slot slot-neck" data-slot="neck"><span>💎</span><br>颈部</div>
                        <div class="equip-slot slot-shoulder" data-slot="shoulder"><span>💪</span><br>肩部</div>
                        <div class="equip-slot slot-back" data-slot="back"><span>🎒</span><br>背部</div>
                        <div class="equip-slot slot-chest" data-slot="chest"><span>👕</span><br>胸部</div>
                        <div class="equip-slot slot-shirt" data-slot="shirt"><span>👔</span><br>衬衣</div>
                        <div class="equip-slot slot-tabard" data-slot="tabard"><span>🚩</span><br>战袍</div>
                        <div class="equip-slot slot-wrist" data-slot="wrist"><span>⌚</span><br>手腕</div>
                        <div class="equip-slot slot-hands" data-slot="hands"><span>🧤</span><br>手套</div>
                        <div class="equip-slot slot-waist" data-slot="waist"><span>〰️</span><br>腰带</div>
                        <div class="equip-slot slot-legs" data-slot="legs"><span>👖</span><br>腿部</div>
                        <div class="equip-slot slot-feet" data-slot="feet"><span>👢</span><br>脚</div>
                        <div class="equip-slot slot-finger1" data-slot="finger1"><span>💍</span><br>手指1</div>
                        <div class="equip-slot slot-finger2" data-slot="finger2"><span>💍</span><br>手指2</div>
                        <div class="equip-slot slot-trinket1" data-slot="trinket1"><span>✨</span><br>饰品1</div>
                        <div class="equip-slot slot-trinket2" data-slot="trinket2"><span>✨</span><br>饰品2</div>
                        <div class="equip-slot slot-mainhand" data-slot="mainhand"><span>⚔️</span><br>主手</div>
                        <div class="equip-slot slot-offhand" data-slot="offhand"><span>🛡️</span><br>副手</div>
                        </div>
                </div>
                <div class="character-stats-detailed">
                    <div class="char-name-level">
                        <span class="char-name">挂机英雄</span>
                    </div>
                    <div class="stats-section">
                        <h3>基本属性</h3>
                        <p>熟练度: <span id="charProficiencyDisplay">...</span></p>
                        <p>装备等级: <span id="charGearScoreDisplay">...</span></p>
                        <p>金币: <span id="charGoldDisplay">...</span></p>
                    </div>
                     <div class="stats-section">
                        <h3>徽章</h3>
                        <p>💎 深渊水晶: <span id="charAbyssCrystalDisplay">--</span></p>
                        <p>🛡️ 英雄徽章: <span id="charHeroismDisplay">--</span></p>
                        <p>🔥 勇气徽章: <span id="charValorDisplay">--</span></p>
                        <p>🏆 征服徽章: <span id="charConquestDisplay">--</span></p>
                        <p>🏅 凯旋徽章: <span id="charTriumphDisplay">--</span></p>
                        <p>❄️ 寒冰徽章: <span id="charFrostDisplay">--</span></p>
                    </div>
                     <div class="stats-section">
                        <h3>传说碎片</h3>
                        <p>🔸 埃提耶什的碎片: <span id="charAtiyehsuideDisplay">--</span></p>
                         <p>🔸 瓦兰奈尔的碎片: <span id="charWalanaiersuideDisplay">--</span></p>
                        <p>🔸 炉石传说的碎片: <span id="charLushichuanshuodesuideDisplay">--</span></p>
                         <p>🔸 影之碎片: <span id="charYingzhisuideDisplay">--</span></p>
                         <p>🔸 霜之碎片: <span id="charShuangzhisuideDisplay">--</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="collectiblesModal" class="modal">
        <div class="modal-content" style="width: 400px;">
             <div class="modal-header">
                <h2>⭐ 收藏品</h2>
                <button class="modal-close" id="collectiblesModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body" id="collectiblesModalBody">
                <p>这里将显示您获得的传说物品和坐骑。</p>
            </div>
        </div>
    </div>

    <div id="itemTooltip" style="display: none;">
        <div class="tooltip-name rarity-common">物品名称</div>
        <div class="tooltip-gearscore">装备等级: 0</div>
        <div class="tooltip-slot">头部</div>
    </div>

    <div id="reminderContainer" class="reminder-container"></div>
    <div id="lootPopup"></div>

    <script type="module" src="main.js"></script>
</body>
</html>